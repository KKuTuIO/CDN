/**
Rule the words! KKuTu Online
Copyright (C) 2017 JJoriping(op@jjo.kr)

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
*/


!function(){function a(){$.get("/servers",function(a){var f=0;c.list.empty(),d=a.list,a.list.forEach(function(a,d){var g,h=null===a?"x":"o",i="x"==h?"-":a+" / "+e,j=a/e*100;f+=a||0,"o"==h&&(j>=99?h="q":j>=90&&(h="p")),c.list.append(g=$("<div>").addClass("server").attr("id","server-"+d).append($("<div>").addClass("server-status ss-"+h)).append($("<div>").addClass("server-name").html(L["server_"+d])).append($("<div>").addClass("server-people graph").append($("<div>").addClass("graph-bar").width(j+"%")).append($("<label>").html(i))).append($("<div>").addClass("server-enter").html(L.serverEnter))),"x"!=h?g.on("click",function(a){b(d)}):g.children(".server-enter").html("-")}),c.total.html("&nbsp;"+L.TOTAL+" "+f+L.MN),c.refi.removeClass("fa-spin"),c.start.prop("disabled",!1)})}function b(a){location.href="/?server="+a}var c,d,e=400;$(document).ready(function(){c={list:$("#server-list"),total:$("#server-total"),start:$("#game-start"),ref:$("#server-refresh"),refi:$("#server-refresh>i")},$("#Background").attr("src","").addClass("jt-image").css({"background-image":"url('https://cdn.jsdelivr.net/npm/kkutuio@latest/img/kkutu/gamebg.png')","background-size":"200px 200px"}),c.start.prop("disabled",!0).on("click",function(a){var c,f;if($("#account-info").html()===L.LOGIN)return void b(0);for(c=.9;c<1;c+=.01)for(f in d)if(d[f]<c*e)return void b(f)}),c.ref.on("click",function(b){if(c.refi.hasClass("fa-spin"))return alert(L.serverWait);c.refi.addClass("fa-spin"),setTimeout(a,1e3)}),setInterval(function(){c.ref.trigger("click")},6e4),a()})}();